apply plugin: 'org.jetbrains.kotlin.android'
apply plugin: 'com.android.library'
apply plugin: 'com.vanniktech.maven.publish'
apply plugin: 'org.jetbrains.dokka' // Must be applied here for publish plugin.

dependencies {
  api projects.redwoodTreehouse
  api projects.redwoodWidget
  implementation libs.androidx.compose.ui
  implementation libs.androidx.compose.foundation.layout
  implementation libs.kotlinx.serialization.json
  implementation projects.redwoodProtocolWidget
  implementation projects.redwoodRuntime
  implementation projects.redwoodWidgetCompose
}

android {
  namespace 'app.cash.treehouse.composeui'

  buildFeatures {
    compose = true
  }

  composeOptions {
    kotlinCompilerExtensionVersion libs.versions.androidxComposeCompiler.get()
  }
}

// TODO(jwilson): adjust dependencies so this doesn't crash, then re-enable it.
tasks.withType(com.android.build.gradle.tasks.JavaDocGenerationTask).configureEach {
  it.onlyIf { false }
}
